#include <fcntl.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>

/*Programa 1*/
/*My_head*/

char buffer[1024];
void my_head(const char *arxiu, int lm){
        int fd = open(arxiu,O_RDONLY);
        if (fd == -1) {
                perror("ERROR: l'arxiu no existeix.");
                close(fd);
                return;
        }
        if (lm <= 0) {
                perror("ERROR: el número de línies és negatiu. ");
                close(fd);
                return;
        } else {
                char c;
                int n_lm = 0;
                while (read(fd, &c, 1) != 0 && n_lm < lm) {
                                if(c == '\n') {
                                        n_lm++;
                                        printf("%c", c);
                                } else {
                                        printf("%c", c);
                                }
                }
        }
}


int main() {
        char arxiu[100];
        int lm = 0;
        printf("Introdueix el nom del arxiu a utilitzar: ");
        scanf("%s",arxiu);
        printf("Introdueix el nombre de línies a mostrar: ");
        scanf("%d",&lm);
        my_head(arxiu,lm);
        return 0;
}
